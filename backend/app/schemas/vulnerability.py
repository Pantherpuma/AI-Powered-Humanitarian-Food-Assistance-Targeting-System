"""Schemas for vulnerability scoring endpoints."""

from datetime import datetime
from typing import Dict, List

from pydantic import BaseModel, Field


class FeatureContribution(BaseModel):
    name: str
    weight: float = Field(..., description="Relative influence on the final score (-1 to 1).")


class VulnerabilityScore(BaseModel):
    region_id: str
    risk_score: float = Field(..., ge=0.0, le=1.0, description="Composite vulnerability score.")
    risk_level: str = Field(..., description="Categorical translation of the risk score.")
    updated_at: datetime
    indicators: Dict[str, float] = Field(default_factory=dict, description="Key indicator snapshot.")
    feature_contributions: List[FeatureContribution] = Field(
        default_factory=list, description="Explainability vector for the AI model."
    )

